{"ast":null,"code":"import { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { HttpClientModule } from '@angular/common/http';\nimport { Subject, debounceTime, distinctUntilChanged } from 'rxjs';\nimport { takeUntil } from 'rxjs/operators';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../services/character.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"@angular/forms\";\nfunction CharacterListComponent_div_12_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 13);\n    i0.ɵɵelement(1, \"div\", 14);\n    i0.ɵɵelementStart(2, \"p\", 15);\n    i0.ɵɵtext(3, \"Cargando personajes...\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction CharacterListComponent_div_13_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r1 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 16);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementStart(2, \"button\", 17);\n    i0.ɵɵlistener(\"click\", function CharacterListComponent_div_13_Template_button_click_2_listener() {\n      i0.ɵɵrestoreView(_r1);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.resetSearch());\n    });\n    i0.ɵɵtext(3, \" Volver \");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate1(\" \", ctx_r1.error, \" \");\n  }\n}\nfunction CharacterListComponent_div_14_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r3 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 20)(1, \"div\", 21);\n    i0.ɵɵlistener(\"click\", function CharacterListComponent_div_14_div_1_Template_div_click_1_listener() {\n      const character_r4 = i0.ɵɵrestoreView(_r3).$implicit;\n      const ctx_r1 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r1.viewCharacterDetail(character_r4));\n    });\n    i0.ɵɵelement(2, \"img\", 22);\n    i0.ɵɵelementStart(3, \"div\", 23)(4, \"h5\", 24);\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"div\", 25)(7, \"div\")(8, \"span\", 26);\n    i0.ɵɵtext(9, \"Estado:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"span\", 27);\n    i0.ɵɵtext(11);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(12, \"div\")(13, \"span\", 26);\n    i0.ɵɵtext(14, \"Especie:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(15, \"span\", 28);\n    i0.ɵɵtext(16);\n    i0.ɵɵelementEnd()()()()()();\n  }\n  if (rf & 2) {\n    const character_r4 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"src\", character_r4.image, i0.ɵɵsanitizeUrl)(\"alt\", character_r4.name);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(character_r4.name);\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"ngClass\", \"status-\" + character_r4.status.toLowerCase());\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate1(\" \", character_r4.status, \" \");\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate(character_r4.species);\n  }\n}\nfunction CharacterListComponent_div_14_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 18);\n    i0.ɵɵtemplate(1, CharacterListComponent_div_14_div_1_Template, 17, 6, \"div\", 19);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngForOf\", ctx_r1.characters);\n  }\n}\nfunction CharacterListComponent_div_15_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 29)(1, \"p\");\n    i0.ɵɵtext(2, \"No se encontraron personajes. Intenta con otra b\\u00FAsqueda.\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction CharacterListComponent_div_16_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r5 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 30)(1, \"button\", 31);\n    i0.ɵɵlistener(\"click\", function CharacterListComponent_div_16_Template_button_click_1_listener() {\n      i0.ɵɵrestoreView(_r5);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.previousPage());\n    });\n    i0.ɵɵtext(2, \" \\u2190 Anterior \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"span\", 32);\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"button\", 31);\n    i0.ɵɵlistener(\"click\", function CharacterListComponent_div_16_Template_button_click_5_listener() {\n      i0.ɵɵrestoreView(_r5);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.nextPage());\n    });\n    i0.ɵɵtext(6, \" Siguiente \\u2192 \");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"disabled\", !ctx_r1.canGoPrevious());\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate2(\" P\\u00E1gina \", ctx_r1.currentPage, \" de \", ctx_r1.totalPages, \" \");\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"disabled\", !ctx_r1.canGoNext());\n  }\n}\nexport let CharacterListComponent = /*#__PURE__*/(() => {\n  class CharacterListComponent {\n    constructor(characterService, router) {\n      this.characterService = characterService;\n      this.router = router;\n      this.characters = [];\n      this.searchTerm = '';\n      this.currentPage = 1;\n      this.totalPages = 1;\n      this.isLoading = false;\n      this.error = '';\n      this.isSearching = false;\n      this.searchSubject = new Subject();\n      this.destroy$ = new Subject();\n    }\n    ngOnInit() {\n      this.loadCharacters();\n      // Búsqueda en tiempo real con debounce\n      this.searchSubject.pipe(debounceTime(500), distinctUntilChanged(), takeUntil(this.destroy$)).subscribe(() => {\n        if (this.searchTerm.trim()) {\n          this.searchCharacters();\n        } else {\n          this.resetSearch();\n        }\n      });\n    }\n    ngOnDestroy() {\n      this.destroy$.next();\n      this.destroy$.complete();\n    }\n    onSearchChange() {\n      this.searchSubject.next(this.searchTerm);\n    }\n    loadCharacters() {\n      this.isLoading = true;\n      this.error = '';\n      this.characterService.getCharacters(this.currentPage).subscribe({\n        next: response => {\n          this.characters = response.results;\n          this.totalPages = response.info.pages;\n          this.isLoading = false;\n        },\n        error: error => {\n          this.error = 'Error al cargar los personajes. Intenta de nuevo.';\n          this.isLoading = false;\n          console.error('Error:', error);\n        }\n      });\n    }\n    searchCharacters() {\n      if (!this.searchTerm.trim()) {\n        this.error = 'Por favor ingresa un nombre para buscar.';\n        return;\n      }\n      this.isLoading = true;\n      this.error = '';\n      this.currentPage = 1;\n      this.isSearching = true;\n      this.characterService.searchCharacters(this.searchTerm, this.currentPage).subscribe({\n        next: response => {\n          this.characters = response.results;\n          this.totalPages = response.info.pages;\n          this.isLoading = false;\n        },\n        error: error => {\n          this.error = `No se encontraron personajes con el nombre \"${this.searchTerm}\". Intenta con otro nombre.`;\n          this.characters = [];\n          this.isLoading = false;\n          console.error('Error:', error);\n        }\n      });\n    }\n    resetSearch() {\n      this.searchTerm = '';\n      this.currentPage = 1;\n      this.isSearching = false;\n      this.error = '';\n      this.loadCharacters();\n    }\n    nextPage() {\n      if (this.canGoNext()) {\n        this.currentPage++;\n        if (this.isSearching) {\n          this.searchCharacters();\n        } else {\n          this.loadCharacters();\n        }\n      }\n    }\n    previousPage() {\n      if (this.canGoPrevious()) {\n        this.currentPage--;\n        if (this.isSearching) {\n          this.searchCharacters();\n        } else {\n          this.loadCharacters();\n        }\n      }\n    }\n    canGoNext() {\n      return this.currentPage < this.totalPages;\n    }\n    canGoPrevious() {\n      return this.currentPage > 1;\n    }\n    static {\n      this.ɵfac = function CharacterListComponent_Factory(__ngFactoryType__) {\n        return new (__ngFactoryType__ || CharacterListComponent)(i0.ɵɵdirectiveInject(i1.CharacterService), i0.ɵɵdirectiveInject(i2.Router));\n      };\n    }\n    static {\n      this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n        type: CharacterListComponent,\n        selectors: [[\"app-character-list\"]],\n        standalone: true,\n        features: [i0.ɵɵStandaloneFeature],\n        decls: 17,\n        vars: 6,\n        consts: [[1, \"container-fluid\"], [1, \"main-content\"], [1, \"search-container\"], [1, \"row\"], [1, \"col-md-6\", \"mx-auto\"], [\"type\", \"text\", \"placeholder\", \"Buscar personaje por nombre...\", 1, \"form-control\", \"search-input\", 3, \"ngModelChange\", \"keyup.enter\", \"ngModel\"], [1, \"btn\", \"btn-primary\", \"w-100\", \"mt-2\", 3, \"click\"], [1, \"btn\", \"btn-secondary\", \"w-100\", \"mt-2\", 3, \"click\"], [\"class\", \"loading-container\", 4, \"ngIf\"], [\"class\", \"alert alert-danger\", \"role\", \"alert\", 4, \"ngIf\"], [\"class\", \"row g-4\", 4, \"ngIf\"], [\"class\", \"no-results\", 4, \"ngIf\"], [\"class\", \"pagination-container\", 4, \"ngIf\"], [1, \"loading-container\"], [1, \"spinner\"], [2, \"margin-left\", \"20px\"], [\"role\", \"alert\", 1, \"alert\", \"alert-danger\"], [1, \"btn\", \"btn-sm\", \"btn-outline-danger\", \"ms-3\", 3, \"click\"], [1, \"row\", \"g-4\"], [\"class\", \"col-sm-6 col-md-4 col-lg-3\", 4, \"ngFor\", \"ngForOf\"], [1, \"col-sm-6\", \"col-md-4\", \"col-lg-3\"], [1, \"character-card\", 2, \"cursor\", \"pointer\", 3, \"click\"], [1, \"character-image\", 3, \"src\", \"alt\"], [1, \"character-info\"], [1, \"character-name\"], [1, \"character-details\"], [1, \"character-detail-label\"], [1, \"character-detail-value\", 3, \"ngClass\"], [1, \"character-detail-value\"], [1, \"no-results\"], [1, \"pagination-container\"], [1, \"btn-pagination\", 3, \"click\", \"disabled\"], [1, \"page-info\"]],\n        template: function CharacterListComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"h1\");\n            i0.ɵɵtext(3, \"Personajes de Rick and Morty\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(4, \"div\", 2)(5, \"div\", 3)(6, \"div\", 4)(7, \"input\", 5);\n            i0.ɵɵtwoWayListener(\"ngModelChange\", function CharacterListComponent_Template_input_ngModelChange_7_listener($event) {\n              i0.ɵɵtwoWayBindingSet(ctx.searchTerm, $event) || (ctx.searchTerm = $event);\n              return $event;\n            });\n            i0.ɵɵlistener(\"ngModelChange\", function CharacterListComponent_Template_input_ngModelChange_7_listener() {\n              return ctx.onSearchChange();\n            })(\"keyup.enter\", function CharacterListComponent_Template_input_keyup_enter_7_listener() {\n              return ctx.searchCharacters();\n            });\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(8, \"button\", 6);\n            i0.ɵɵlistener(\"click\", function CharacterListComponent_Template_button_click_8_listener() {\n              return ctx.searchCharacters();\n            });\n            i0.ɵɵtext(9, \" Buscar \");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(10, \"button\", 7);\n            i0.ɵɵlistener(\"click\", function CharacterListComponent_Template_button_click_10_listener() {\n              return ctx.resetSearch();\n            });\n            i0.ɵɵtext(11, \" Limpiar b\\u00FAsqueda \");\n            i0.ɵɵelementEnd()()()();\n            i0.ɵɵtemplate(12, CharacterListComponent_div_12_Template, 4, 0, \"div\", 8)(13, CharacterListComponent_div_13_Template, 4, 1, \"div\", 9)(14, CharacterListComponent_div_14_Template, 2, 1, \"div\", 10)(15, CharacterListComponent_div_15_Template, 3, 0, \"div\", 11)(16, CharacterListComponent_div_16_Template, 7, 4, \"div\", 12);\n            i0.ɵɵelementEnd()();\n          }\n          if (rf & 2) {\n            i0.ɵɵadvance(7);\n            i0.ɵɵtwoWayProperty(\"ngModel\", ctx.searchTerm);\n            i0.ɵɵadvance(5);\n            i0.ɵɵproperty(\"ngIf\", ctx.isLoading);\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"ngIf\", ctx.error && !ctx.isLoading);\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"ngIf\", !ctx.isLoading && ctx.characters.length > 0);\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"ngIf\", !ctx.isLoading && ctx.characters.length === 0 && !ctx.error);\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"ngIf\", !ctx.isLoading && ctx.characters.length > 0);\n          }\n        },\n        dependencies: [CommonModule, i3.NgClass, i3.NgForOf, i3.NgIf, FormsModule, i4.DefaultValueAccessor, i4.NgControlStatus, i4.NgModel, HttpClientModule]\n      });\n    }\n  }\n  return CharacterListComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}